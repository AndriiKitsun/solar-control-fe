<div class="sensors" *transloco="let t">
  <div class="card">
    <app-sensors-toolbar [disabled]="isLoading()" [createdAt]="createdAt" />

    <!--    <p-toolbar styleClass="mb-4">-->
    <!--      <ng-template #start>-->
    <!--        <span class="text-xl font-semibold">{{-->
    <!--          t(pzemLabel, { time: createdAt | date: 'HH:mm:ss' })-->
    <!--        }}</span>-->
    <!--      </ng-template>-->

    <!--      <ng-template #end>-->
    <!--        <p-button-->
    <!--          [label]="t('SENSORS.BUTTON.RESET_COUNTERS')"-->
    <!--          variant="outlined"-->
    <!--          severity="danger"-->
    <!--          icon="pi pi-bolt"-->
    <!--          class="mr-2"-->
    <!--          [disabled]="isLoading()"-->
    <!--          [loading]="isResetProcessing()"-->
    <!--          (onClick)="openResetConfirmationModal($event)"-->
    <!--        />-->

    <!--        <p-button-->
    <!--          [label]="isSensorsEnabled() ? 'Power off' : 'Power on'"-->
    <!--          variant="outlined"-->
    <!--          [severity]="isSensorsEnabled() ? 'danger' : 'success'"-->
    <!--          icon="pi pi-power-off"-->
    <!--          [disabled]="isLoading()"-->
    <!--        />-->
    <!--      </ng-template>-->
    <!--    </p-toolbar>-->

    <p-table
      [value]="(tablesRows$ | async)!"
      [loading]="isLoading()"
      dataKey="id"
      [tableStyle]="{ 'min-height': '13rem' }"
      showGridlines
      rowHover
      scrollable
      stripedRows
    >
      <ng-template #header>
        <tr>
          <th class="table__cell table__header">
            {{ t('SENSORS.TABLE.COLUMN.NAME') }}
          </th>
          <th class="table__cell table__header">
            {{ t('SENSORS.TABLE.COLUMN.VOLTAGE') }}
          </th>
          <th class="table__cell table__header">
            {{ t('SENSORS.TABLE.COLUMN.CURRENT') }}
          </th>
          <th class="table__cell table__header">
            {{ t('SENSORS.TABLE.COLUMN.POWER') }}
          </th>
          <th class="table__cell table__header">
            {{ t('SENSORS.TABLE.COLUMN.ENERGY') }}
          </th>
          <th class="table__cell table__header">
            {{ t('SENSORS.TABLE.COLUMN.T1_ENERGY') }}
          </th>
          <th class="table__cell table__header">
            {{ t('SENSORS.TABLE.COLUMN.T2_ENERGY') }}
          </th>
          <th class="table__cell table__header">
            {{ t('SENSORS.TABLE.COLUMN.FREQUENCY') }}
          </th>
          <th class="table__cell table__header">
            {{ t('SENSORS.TABLE.COLUMN.POWER_FACTOR') }}
          </th>
          <th class="table__cell table__header">
            {{ t('SENSORS.TABLE.COLUMN.AVG_VOLTAGE') }}
          </th>
        </tr>
      </ng-template>

      <ng-template #body let-row>
        <tr [ngClass]="{ '!bg-highlight': row.isEmpty }">
          <td class="table__row-title">{{ t(row.title) }}</td>
          <td class="table__cell">{{ row.data.voltage }}</td>
          <td class="table__cell">{{ row.data.current }}</td>
          <td class="table__cell">{{ row.data.power }}</td>
          <td class="table__cell">{{ row.data.energy }}</td>
          <td class="table__cell">{{ row.data.t1Energy }}</td>
          <td class="table__cell">{{ row.data.t2Energy }}</td>
          <td class="table__cell">{{ row.data.frequency }}</td>
          <td class="table__cell">{{ row.data.powerFactor }}</td>
          <td class="table__cell">{{ row.data.avgVoltage }}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>

<p-toast />
<p-confirm-dialog />
