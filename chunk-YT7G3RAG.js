import{A as l,F as Z,c as J,e as Q,f as Y}from"./chunk-L5HMVURM.js";import"./chunk-BYXBJQAS.js";import{c as ee,d as te,f as T,g as N,h as ne}from"./chunk-XAZLOLJU.js";import{h as G,k as H,l as W}from"./chunk-I7RCQSEK.js";import{$a as p,Aa as O,H as $,K as y,N as K,Pa as u,Ra as r,Ua as R,V as _,Va as c,Xa as b,Ya as C,Za as a,_a as s,ab as S,bb as P,cb as L,da as I,db as o,ea as k,i as D,kb as v,lb as F,m as w,mb as q,q as h,rb as f,sb as V,tb as j,ub as X,vb as B,w as A,wa as U,wb as z,za as m}from"./chunk-TUHPCFGN.js";var g=class t{menuState=new D;menuState$=this.menuState.asObservable();updateMenuState(n){this.menuState.next(n)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})};var se=(t,n)=>n.label,le=(t,n)=>({"menu-item_disabled":t,"menu-item_selected":n}),ue=t=>({"menu-item__submenu-icon_active":t});function ce(t,n){if(t&1&&(a(0,"div",2),S(1,6),s()),t&2){o();let e=v(7);m(),r("ngTemplateOutlet",e)}}function pe(t,n){if(t&1){let e=P();a(0,"a",7),L("click",function(){I(e);let d=o();return k(d.itemClicked())}),S(1,6),s()}if(t&2){let e=o(),i=v(7);r("href",e.item.url,U)("target",e.item.target),m(),r("ngTemplateOutlet",i)}}function de(t,n){if(t&1){let e=P();a(0,"a",8),L("click",function(){I(e);let d=o();return k(d.itemClicked())}),S(1,6),s()}if(t&2){let e=o(),i=v(7);r("routerLink",e.item.routerLink)("queryParams",e.item.queryParams),m(),r("ngTemplateOutlet",i)}}function _e(t,n){if(t&1&&p(0,"app-menu-item",9),t&2){let e=o(),i=e.$implicit,d=e.$index,me=o(2);r("item",i)("index",d)("parentItemKey",me.itemKey)("isTopLevel",!1)}}function fe(t,n){if(t&1&&u(0,_e,1,4,"app-menu-item",9),t&2){let e=n.$implicit;c(e.visible!==!1?0:-1)}}function be(t,n){if(t&1&&(a(0,"ul",5),b(1,fe,1,1,null,null,se),s()),t&2){let e=o();r("@submenu",e.animationState),m(),C(e.item.items)}}function Ce(t,n){if(t&1&&p(0,"i",12),t&2){let e=o(2);R(e.item.icon)}}function Se(t,n){if(t&1&&p(0,"i",11),t&2){let e=o(2);r("ngClass",V(1,ue,e.isSubmenuOpened))}}function ve(t,n){if(t&1&&(u(0,Ce,1,2,"i",10),a(1,"span"),F(2),s(),u(3,Se,1,3,"i",11)),t&2){let e=o();c(e.item.icon?0:-1),m(2),q(e.item.label),m(),c(e.isSubmenu?3:-1)}}var x=class t{constructor(n,e){this.router=n;this.menuService=e}item;index;isTopLevel=!0;parentItemKey="";isItemSelected$;isSubmenu;isSubmenuOpened;itemKey;menuStateSubscription;get animationState(){return this.isTopLevel?"expanded":this.isSubmenuOpened?"expanded":"collapsed"}ngOnInit(){this.itemKey=this.buildItemKey(),this.isItemSelected$=this.getItemSelectedState(),this.isSubmenu=!!this.item.items?.length&&!this.isTopLevel,this.menuStateSubscription=this.handleMenuStateChange().subscribe()}ngOnDestroy(){this.menuStateSubscription.unsubscribe()}buildItemKey(){return this.parentItemKey?`${this.parentItemKey}-${this.index}`:`${this.index}`}getItemSelectedState(){if(!this.item.routerLink)return w(!1);let n=this.router.createUrlTree([this.item.routerLink],{queryParams:this.item.queryParams}).toString();return this.router.events.pipe(A(e=>e instanceof J),h(e=>e.urlAfterRedirects),$(this.router.url),h(e=>n===e),y(e=>{e&&this.menuService.updateMenuState({key:this.itemKey})}))}handleMenuStateChange(){return this.menuService.menuState$.pipe(y(n=>{this.isSubmenu&&Promise.resolve().then(()=>{let e=!1;n.key===this.itemKey?e=!this.isSubmenuOpened:(n.key.startsWith(this.itemKey)||this.isTopLevel)&&(e=!0),this.toggleSubmenu(e)})}))}itemClicked(){this.menuService.updateMenuState({key:this.itemKey})}toggleSubmenu(n){this.isSubmenuOpened=n}static \u0275fac=function(e){return new(e||t)(O(Q),O(g))};static \u0275cmp=_({type:t,selectors:[["app-menu-item"]],inputs:{item:"item",index:"index",isTopLevel:"isTopLevel",parentItemKey:"parentItemKey"},standalone:!0,features:[f],decls:8,vars:8,consts:[["menuItemLink",""],[1,"menu-item",3,"ngClass"],[1,"menu-item__header"],["tabindex","0","pRipple","",1,"menu-item__link",3,"href","target"],["tabindex","0","pRipple","",1,"menu-item__link",3,"routerLink","queryParams"],[1,"menu-item__submenu"],[3,"ngTemplateOutlet"],["tabindex","0","pRipple","",1,"menu-item__link",3,"click","href","target"],["tabindex","0","pRipple","",1,"menu-item__link",3,"click","routerLink","queryParams"],[3,"item","index","parentItemKey","isTopLevel"],[1,"menu-item__icon",3,"class"],[1,"pi","pi-fw","pi-angle-down","menu-item__submenu-icon",3,"ngClass"],[1,"menu-item__icon"]],template:function(e,i){e&1&&(a(0,"li",1),X(1,"async"),u(2,ce,2,1,"div",2)(3,pe,2,3,"a",3)(4,de,2,3,"a",4)(5,be,3,1,"ul",5),s(),u(6,ve,4,3,"ng-template",null,0,z)),e&2&&(r("ngClass",j(5,le,i.item.disabled,B(1,3,i.isItemSelected$))),m(2),c(i.isTopLevel?2:i.item.url?3:4),m(3),c(i.item.items!=null&&i.item.items.length?5:-1))},dependencies:[t,H,Y,Z,G,W],styles:[".menu-item_disabled[_ngcontent-%COMP%]{cursor:default;pointer-events:none;-webkit-user-select:none;user-select:none;opacity:var(--disabled-opacity)}.menu-item__link[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative;outline:0 none;color:var(--text-color);cursor:pointer;padding:.75rem 1rem;border-radius:var(--content-border-radius)}.menu-item__link[_ngcontent-%COMP%]:hover{background-color:var(--content-hover-background)}.menu-item__link[_ngcontent-%COMP%]:focus-visible{outline:var(--focus-ring-color) var(--focus-ring-style) var(--focus-ring-width);outline-offset:-1px;box-shadow:var(--focus-ring-shadow);transition:box-shadow var(--transition-duration),outline-color var(--transition-duration)}.menu-item_selected[_ngcontent-%COMP%]   .menu-item__link[_ngcontent-%COMP%]{font-weight:700;color:var(--primary-color)}.menu-item__header[_ngcontent-%COMP%]{font-size:.857rem;text-transform:uppercase;font-weight:700;color:var(--text-color);margin:.75rem 0;display:flex;align-items:center}.menu-item__icon[_ngcontent-%COMP%]{margin-right:.5rem}.menu-item__submenu[_ngcontent-%COMP%]{display:block;overflow:hidden}.menu-item__submenu[_ngcontent-%COMP%]   .menu-item__submenu[_ngcontent-%COMP%]{margin-left:1rem}.menu-item__submenu-icon[_ngcontent-%COMP%]{font-size:75%;margin-left:auto;transition:transform var(--transition-duration)}.menu-item__submenu-icon_active[_ngcontent-%COMP%]{transform:rotate(-180deg)}"],data:{animation:[ee("submenu",[N("collapsed",T({height:0})),N("expanded",T({height:"*"})),ne("collapsed <=> expanded",te("200ms ease-in-out"))])]}})};var oe=[{label:"Home",items:[{label:"Dashboard",icon:l.HOME,routerLink:"/"}]},{label:"Stations",items:[{label:"Address 1",icon:l.SUN,routerLink:"stations",queryParams:{id:"address1"}},{label:"Address 2",icon:l.BUILDING_COLUMNS,items:[{label:"Station 1",icon:l.SUN,routerLink:"stations",queryParams:{id:"address2-1"}},{label:"Station 2",icon:l.SUN,routerLink:"stations",queryParams:{id:"address2-2"}}]}]},{label:"Miners",items:[{label:"Address 1",icon:l.BUILDING_COLUMNS,routerLink:"miners",queryParams:{id:"address1-1"}},{label:"Address 2",icon:l.BUILDING_COLUMNS,items:[{label:"Asic 1",icon:l.SUN,routerLink:"miners",queryParams:{id:"address2-1"}},{label:"Asic 2",icon:l.SUN,routerLink:"miners",queryParams:{id:"address2-2"}}]}]}];var ge=(t,n)=>n.label;function xe(t,n){if(t&1&&p(0,"app-menu-item",1),t&2){let e=o(),i=e.$implicit,d=e.$index;r("item",i)("index",d)}}function Me(t,n){if(t&1&&u(0,xe,1,2,"app-menu-item",1),t&2){let e=n.$implicit;c(e.visible!==!1?0:-1)}}var M=class t{items;ngOnInit(){this.items=oe}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-menu"]],standalone:!0,features:[f],decls:3,vars:0,consts:[[1,"menu"],[3,"item","index"]],template:function(e,i){e&1&&(a(0,"ul",0),b(1,Me,1,1,null,null,ge),s()),e&2&&(m(),C(i.items))},dependencies:[x],encapsulation:2})};var re=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-miners"]],standalone:!0,features:[f],decls:2,vars:0,consts:[[1,"menu"]],template:function(e,i){e&1&&(a(0,"div",0),p(1,"app-menu"),s())},dependencies:[M],styles:[".menu[_ngcontent-%COMP%]{width:20rem;height:calc(100vh - 8rem);overflow-y:auto;-webkit-user-select:none;user-select:none;top:6rem;left:2rem;background-color:var(--content-card-background);border-radius:var(--content-border-radius);padding:.5rem 1.5rem}"]})};export{re as MinersComponent};
